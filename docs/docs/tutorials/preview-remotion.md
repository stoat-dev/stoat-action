---
sidebar_position: 109
title: Remotion Previews
---

# Preview Remotion video in PRs

Stoat can help you preview videos generated by Remotion as part of your build in a comment on your pull request. In the future you
will be able to compare versions of a video with previous versions or the version in your `main` branch.

## Adding video preview in the Stoat comment

1. Set up Stoat with our [getting started guide](../installation).

2. Create a GitHub workflow that renders the Remotion video.

  ```yaml
  name: Preview video
  on:
    push:
      branches:
        - main
    pull_request:
      branches:
        - main
  jobs:
    render:
      name: Render video
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v3
        - uses: actions/setup-node@v3
          with:
            node-version: '16'
            cache: npm
        - run: sudo apt update
        - run: sudo apt install ffmpeg
        - run: npm i
        - name: Generate video
          run: npm run build
        - name: Generate gif
          run: ffmpeg -i out/video.mp4 -vf "fps=10,scale=640:-1" -pix_fmt rgb24 out/video.gif
        - name: Run Stoat Action
          uses: stoat-dev/stoat-action@v0
          if: always()
  ```

2. Update the Stoat config with a video preview task and a gif preview task under the `static_hosting` plugin:

    ```yaml title=".stoat/config.yaml"
    ---
    version: 1
    enabled: true
    comment_template_file: .stoat/comment.hbs
    plugins:
      job_runtime:
        enabled: true
      static_hosting:
        video_preview:
          metadata:
            name: Video
          # This file is generated by remotion in the
          # "Generate video" step of the preview workflow.
          path: out/video.mp4
        gif_preview:
          metadata:
            name: GIF
          # This file is generated from the remotion video in the
          # "Generate gif" step of the preview workflow.
          path: out/video.gif
    ```

That's it. If you create a pull request, when the build completes, you should see a preview GIF. When clicking on the GIF, you will be linked to generated video hosted by Stoat.

> ## Preview
>
> [![preview](https://stoat-dev--example-re-cf7a--82a63d3--gif-preview.stoat.page/video.gif)](https://stoat-dev--example-re-cf7a--82a63d3--video-preview.stoat.page/video.mp4)
>
> (Click the GIF go to the full video.)
>
> ## Job Runtime
>
> <a href="https://quickchart.io/chart/render/sp-6ff8213a-0db1-43b1-8fd5-8039a1395957" target="_blank">
>  <img src="https://quickchart.io/chart/render/sp-6ff8213a-0db1-43b1-8fd5-8039a1395957" height="300" />
> </a>

## Example Repo

See a Remotion template repo integrated with Stoat here: [`stoat-dev/example-remotion`](https://github.com/stoat-dev/example-remotion). It is forked from the official [`remotion-dev/template-helloworld`](https://github.com/remotion-dev/template-helloworld) repo.

Here is the pull request that demonstrates the preview: [link](https://github.com/stoat-dev/example-remotion/pull/1).
